<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cookie&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="styles.css">
    <title>Document</title>
</head>
<body>
    <div id="padding">
        <h1 class="fancy mt-5">Decod'shala</h1>
        <h5>Admin</h5>
        <div class="row">
        
            <div class="col-lg-6 col-md-8 col-sm-10 col-10 mx-auto top-mrg">
                <form action="/addQue" method="post" class="" id="myform">
                <h1 class="fancy">Add question</h1>
            <div class="mb-3">
                <label for="question" class="form-label">Question</label>
                <input type="text" class="form-control" id="question" name="question" required>
              </div>
              <div class="mb-3">
                <label for="answer" class="form-label">Answer</label>
                <input type="text" class="form-control" id="answer" name="answer" required>
              </div>
              <button type="submit" class="btn btn-lg btn-outline-light mt-3">Add Question</button>
            </form>
            
            </div>
        <div class="col-lg-6 col-md-8 col-sm-10 col-10 mx-auto top-mrg">
            <div class="col-8 m-auto" id="msg-container">
            <h1 class="display-4" id="msg">Players waiting for question...</h1>
            <h5 id="ques"></h5>
            </div>
            <button type="button" class="btn btn-lg btn-danger mt-5" onclick="avengersendgame()">End Game</button>
        </div>
        
        </div>
        <a href="/logout" role="button" class="btn btn-outline-primary mt-5">Logout</a>


    </div>
    <script> 
        window.onload = () => {
            setTimeout( setInterval(checker, 2000),1000);
        
        }
        
        function checker () {
            fetch('/checkSent')
            .then(response => response.json())
            .then(response => {
                if(response.status == true){
                document.getElementById("msg").innerHTML = response.admsg;
                document.getElementById("ques").innerHTML = response.question;
                }
            }).catch(err => console.log(err));
        }

        function avengersendgame() {
            document.getElementById("question").value = "end";
            document.getElementById("answer").value = "end";
            document.getElementById("myform").submit();
        }

        
    </script>
</body>
</html>